{
  "directories": { "output": "/home/lajos/CradleOutTemp", "input": "/home/lajos/CradleInput" },
  "services": [
    {
      "appName": "PlanoConfig",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoConfig.git" },
        {
          "type": "DockerInstall",
          "imageName": "mongo:3.4",
          "portMappings": [{ "source": 27017, "destination": 27017, "type": "TCP" }]
        },
        { "type": "NpmInstall" },
        { "type": "MongoRestore", "dbName": "PlanoConfig", "dumpPath": "./db-dump/plano-config" },
        { "type": "AddToPm2", "displayName": "PlanoConfig:3000", "script": "./web.js" }
      ]
    },
    {
      "appName": "PlanoAuth",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoAuth.git" },
        { "type": "NpmInstall" },
        { "type": "MongoRestore", "dbName": "plano-auth", "dumpPath": "./db-dump/plano-auth" },
        { "type": "AddToPm2", "displayName": "PlanoAuth:8666", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoBase",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoBase.git" },
        { "type": "NpmInstall" },
        { "type": "MongoRestore", "dbName": "plano-base", "dumpPath": "./db-dump/plano-base" },
        { "type": "AddToPm2", "displayName": "PlanoBase:8896", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoVisit",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoVisit.git" },
        { "type": "NpmInstall" },
        { "type": "MongoRestore", "dbName": "plano-visit", "dumpPath": "./db-dump/plano-visit" },
        { "type": "AddToPm2", "displayName": "PlanoVisit:9002", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoStore",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoStore.git" },
        { "type": "NpmInstall" },
        { "type": "MongoRestore", "dbName": "planostore", "dumpPath": "./db-dump/plano-store" },
        { "type": "AddToPm2", "displayName": "PlanoStore:9003", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoProxy",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoProxy.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "PlanoProxy:8888", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoPortal",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoPortal.git" },
        { "type": "NpmInstall" },
        { "type": "BowerInstall" },
        { "type": "AddToPm2", "displayName": "PlanoPortal:9001", "script": "./app.js" }
      ]
    },
    {
      "appName": "plonfig",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/plonfig.git" },
        { "type": "NpmInstall" },
        { "type": "BowerInstall", "path": "./public" },
        { "type": "AddToPm2", "displayName": "plonfig:8877", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoLiveFinal",
      "installSteps": [
        { "type": "GitClone", "repository": "https://github.com/planorama/PlanoLiveFinal.git", "onExists": "pull" },
        {
          "type": "DockerInstall",
          "imageName": "mongo:3.4",
          "portMappings": [{ "source": 27017, "destination": 27017, "type": "TCP" }]
        },
        {
          "type": "DockerInstall",
          "imageName": "redis:4"
        },
        {
          "type": "DockerInstall",
          "imageName": "rabbitmq:3-management",
          "portMappings": [
            {
              "source": 15672,
              "destination": 15672,
              "type": "TCP"
            }
          ]
        },
        { "type": "NpmInstall" },
        { "type": "NpmInstall", "path": "./public" },
        { "type": "NpmScript", "path": "./public", "scriptName": "build" },
        {
          "type": "MongoRestore",
          "dbName": "plano-live-final",
          "dumpPath": "./db-dump/plano-live-final"
        },
        { "type": "AddToPm2", "displayName": "PLF:8899", "script": "./app.js" },
        { "type": "AddToPm2", "displayName": "PLF-Backend:9009", "script": "./backend.js" }
      ]
    },
    {
      "appName": "PlanoFiler",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoFiler.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "PlanoFiler:8893", "script": "./app.js" }
      ]
    },
    {
      "appName": "portal",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/portal.git" },
        { "type": "NpmInstall" },
        { "type": "NpmInstall", "path": "./server" },
        { "type": "NpmScript", "scriptName": "build" },
        { "type": "AddToPm2", "displayName": "portal:8001", "script": "./index.js" }
      ]
    },
    {
      "appName": "PlanoForms",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoForms.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "PlanoForms", "script": "./app.js" }
      ]
    },
    {
      "appName": "StoreReport",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/StoreReport.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "StoreReport", "script": "./app.js" }
      ]
    },
    {
      "appName": "Reports",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/Reports.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "Reports", "script": "./app.js" }
      ]
    },
    {
      "appName": "pbi-config",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/pbi-config.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "pbi-config:9013", "script": "./app.js" }
      ]
    },
    {
      "appName": "CustomerStats",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/CustomerStats.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "CustomerStats:9011", "script": "./app.js" }
      ]
    },
    {
      "appName": "PlanoCustom-Default",
      "installSteps": [
        {
          "type": "GitClone",
          "onExists": "pull",
          "repository": "https://github.com/planorama/PlanoCustom-Default.git"
        },
        { "type": "NpmInstall" },
        { "type": "NpmScript", "scriptName": "build" },
        { "type": "MongoRestore", "dbName": "PlanoCustom", "dumpPath": "./db-dump/planostandard" },
        { "type": "AddToPm2", "displayName": "PlanoCustom-Default:4000", "script": "./index.js" }
      ]
    },
    {
      "appName": "PlanoExport",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoExport.git" },
        { "type": "NpmInstall" },
        { "type": "AddToPm2", "displayName": "PlanoExport:8892", "script": "./app.js" },
        { "type": "AddToPm2", "displayName": "PlanoExport-Worker", "script": "./worker.js" }
      ]
    },
    {
      "appName": "PlanoImport",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoImport.git" },
        { "type": "NpmInstall" },
        { "type": "BowerInstall", "path": "./public" },
        { "type": "AddToPm2", "displayName": "PlanoImport", "script": "./app.js" },
        { "type": "AddToPm2", "displayName": "PlanoImport-Worker", "script": "./worker.js" }
      ]
    },
    {
      "appName": "PlanoMonitor",
      "installSteps": [
        { "type": "GitClone", "onExists": "pull", "repository": "https://github.com/planorama/PlanoMonitor.git" },
        { "type": "NpmInstall" },
        { "type": "BowerInstall", "path": "./public" },
        { "type": "AddToPm2", "displayName": "PlanoMonitor", "script": "./app.js" }
      ]
    }
  ]
}
