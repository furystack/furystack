{"$schema":"http://json-schema.org/draft-07/schema#","$ref":"#/definitions/Config","definitions":{"Config":{"type":"object","properties":{"$schema":{"type":"string"},"directories":{"type":"object","properties":{"output":{"type":"string","description":"Will be used as the root of your cloned services"},"input":{"type":"string","description":"You can place input data, DB dumps, etc... in this folder"}},"required":["output","input"],"additionalProperties":false,"description":"Absolute paths of the specific directories"},"services":{"type":"array","items":{"$ref":"#/definitions/ServiceModel"},"description":"List of service definitions"}},"required":["$schema","directories","services"],"additionalProperties":false,"description":"Configuration Root Type"},"ServiceModel":{"type":"object","properties":{"appName":{"type":"string"},"installSteps":{"type":"array","items":{"$ref":"#/definitions/InstallStep"}}},"required":["appName","installSteps"],"additionalProperties":false},"InstallStep":{"anyOf":[{"$ref":"#/definitions/GitClone"},{"$ref":"#/definitions/MongoRestore"},{"$ref":"#/definitions/DockerInstall"},{"$ref":"#/definitions/AddToPm2"},{"$ref":"#/definitions/NpmInstall"},{"$ref":"#/definitions/NpmScript"},{"$ref":"#/definitions/BowerInstall"}]},"GitClone":{"type":"object","properties":{"type":{"type":"string","enum":["GitClone"]},"repository":{"type":"string","description":"The full repository URL (https or ssh)"},"branch":{"type":"string","description":"Optional branch"},"onExists":{"type":"string","enum":["fail","pull","stash-and-pull","ignore"],"description":"What should happen if the cloned repository already exists?"}},"required":["type","repository"],"additionalProperties":false,"description":"Clones a specified GIT repository into"},"MongoRestore":{"type":"object","properties":{"type":{"type":"string","enum":["MongoRestore"]},"dbName":{"type":"string","description":"The Database name"},"dumpPath":{"type":"string","description":"Relative (to the input directory) path to the dump folder"},"drop":{"type":"boolean","description":"Drops each collection before import"},"uri":{"type":"string","description":"An optional mongodb uri string (e.g. mongodb://localhost:123456)"}},"required":["type","dbName","dumpPath"],"additionalProperties":false,"description":"Restores a MongoDB Database using 'mongorestore'"},"DockerInstall":{"type":"object","properties":{"type":{"type":"string","enum":["DockerInstall"]},"imageName":{"type":"string","description":"The name (and version) of the Docker image (e.g.: 'nginx:latest')"},"portMappings":{"type":"array","items":{"type":"object","properties":{"source":{"type":"number"},"destination":{"type":"number"},"type":{"type":"string","enum":["TCP","UDP"]}},"required":["source","destination","type"],"additionalProperties":false},"description":"An optional list of port mappings"},"volumeMappings":{"type":"array","items":{"type":"object","properties":{"source":{"type":"string"},"destination":{"type":"string"}},"required":["source","destination"],"additionalProperties":false},"description":"An optional list of volume mappings"}},"required":["type","imageName"],"additionalProperties":false,"description":"Installs a Docker image"},"AddToPm2":{"type":"object","properties":{"type":{"type":"string","enum":["AddToPm2"]},"displayName":{"type":"string","description":"The display name in PM2"},"script":{"type":"string","description":"The script file"}},"required":["type","displayName","script"],"additionalProperties":false,"description":"Adds a service to NPM"},"NpmInstall":{"type":"object","properties":{"type":{"type":"string","enum":["NpmInstall"]},"path":{"type":"string","description":"Optional relative (to the service root) path where the install should be triggered"}},"required":["type"],"additionalProperties":false,"description":"Executes an NPM Install command"},"NpmScript":{"type":"object","properties":{"type":{"type":"string","enum":["NpmScript"]},"path":{"type":"string","description":"Relative (to the service root) path where the script should be started"},"scriptName":{"type":"string","description":"The script name (e.g. 'build' in the case of 'npm run build')"}},"required":["type","scriptName"],"additionalProperties":false,"description":"Executes an NPM script (e.g. 'npm run build')"},"BowerInstall":{"type":"object","properties":{"type":{"type":"string","enum":["BowerInstall"]},"path":{"type":"string","description":"Optional path (relative to the service root)"}},"required":["type"],"additionalProperties":false,"description":"Install dependencies with Bower"}}}